# multi-stage buildとは

# Distroless
シンプルな軽量イメージ。Alpineも2021年ではそこまで軽いというほどではなく、互換性の問題がある。
Attach Surface的な面でも優秀

- docker-compose.ymlを書く時、portはダブルクオートで囲わないと、60進数と認識されて59以下のポート指定の際にエラーが出る

# コマンド
- RUN
リモートからもファイル追加できる
圧縮ファイルが自動解凍される

- COPY
リモートからのファイル追加は出来ない
圧縮ファイルは自動解凍されない

gemfileとかソースコードをイメージに追加するときは、COPYを使うとミスってリモートからファイル追加することがなくていい

# 全削除
コンテナ全削除（終了しているもののみ）

```docker rm (docker ps -a -f status=exited -q)```

イメージ全削除(イメージを使っているコンテナがある時もあるので、コンテナを先に消す)

```docker rmi -f (docker images -a -q)```
